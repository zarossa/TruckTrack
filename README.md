# TruckTrack

### REST API сервис поиска ближайших машин для перевозки грузов.

## Стек:

- **Python** (Django Rest Framework)
- **PostgreSQL** в качестве базы данных
- **docker-compose** для запуска приложения
- **nginx** веб-сервер
- **gunicorn** WSGI server
- **celery + redis** обработка периодических задач
- **geopy** расчет расстояний

## Особенности:

- При сборке сервиса БД заполняется списком локаций и 20 тестовыми машинами
- Автоматическое обновление локаций всех машин раз в 3 минуты
- Расчет и отображение расстояний осуществляется в милях

## Сервис поддерживает следующие функции:

### Машины (/machine)
- POST requests:
    - Создание новой машины. Атрибуты:
        - номер (в формате цифра от 1000 до 9999 + заглавная буква английского алфавита)
        - локация по zip-коду (опционально, если отсутствует - выбирается случайная)
        - грузоподьемность (опционально, если отсутствует - ставится равной 1)
- PUT requests:
    - Редактирование машины по ее id. Атрибуты:
        - локация по zip-коду

### Грузы (/cargo)

- GET requests:
    - Список грузов (локации pick-up, delivery, количество ближайших машин до груза). Параметры:
        - dist (опционально, радиус поиска машин, если отсутствует поиск по 450 милям). Пример: dist=2300
        - weight (опционально, фильтр по массе). Пример: weight=50
    - Информация о грузе по его id (локации pick-up, delivery, вес, описание, список номеров всех машин с расстоянием до них)
- POST requests:
    - Создание нового груза. Атрибуты:
        - локация pick-up по zip-коду
        - локация delivery по zip-коду
        - масса
        - описание
- PUT requests:
    - Редактирование груза по его id. Атрибуты:
        - масса
        - описание
- DELETE requests:
    - Удаление груза по его id

## Запуск:

```text
git clone https://github.com/zarossa/TruckTrack.git
cd TruckTrack/
echo "DB_NAME=name
    DB_USER=user
    DB_PASSWORD=password
    SECRET_KEY=secretkey
    DEBUG=
    HOST=host" > .env
docker-compose up -d bd
docker-compose up -d
```
